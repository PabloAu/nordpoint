<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Empirica</title>
  <meta name="description" content="Evidence-based investing education. Learn how to manage your wealth." />
  <meta name="theme-color" content="#0f0f10" />

  <style>
    :root{
      --ink:#0f0f10;
      --muted: rgba(15,15,16,.70);
      --muted2: rgba(15,15,16,.55);
      --line: rgba(15,15,16,.10);
      --line2: rgba(15,15,16,.14);

      /* calm paper bands */
      --bgA:#f5f2ed;
      --bgB:#fbfaf7;
      --bgC:#f2efe9;

      --max: 1180px;
      --shadow: 0 18px 70px rgba(0,0,0,.10);
      --shadow2: 0 10px 28px rgba(0,0,0,.07);

      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      --serif: ui-serif, Georgia, "Times New Roman", Times, serif;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:var(--sans);
      color:var(--ink);
      background: var(--bgA);
      overflow-x:hidden;
    }
    a{color:inherit;text-decoration:none}
    a:hover{opacity:.88}

    /* subtle noise */
    .noise{
      pointer-events:none;
      position:fixed; inset:0;
      opacity:.045;
      mix-blend-mode:multiply;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='260' height='260'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='260' height='260' filter='url(%23n)' opacity='.75'/%3E%3C/svg%3E");
      background-size:260px 260px;
      z-index:0;
    }

    /* NAV */
    header{
      position:sticky; top:0; z-index:50;
      background:rgba(245,242,237,.84);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid rgba(15,15,16,.08);
    }
    .nav{
      max-width:var(--max);
      margin:0 auto;
      padding:14px 18px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
    }

    .brand{display:flex;flex-direction:column;gap:4px;min-width:220px}
    .brand .name{
      font-family: var(--serif);
      font-size: 22px;
      letter-spacing:.12em;
      text-transform:uppercase;
      line-height:1;
    }
    .brand .tag{
      font-family: var(--serif);
      font-size: 14px;
      color: var(--muted2);
      line-height:1;
    }

    nav{display:flex;align-items:center;gap:12px;flex-wrap:wrap;justify-content:flex-end}
    nav a.link{
      font-size:13px;
      color:var(--muted);
      padding:8px 10px;
      border-radius:999px;
    }
    nav a.link:hover{
      color:var(--ink);
      background:rgba(255,255,255,.55);
    }

    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      border-radius:999px;
      padding:10px 14px;
      font-size:13px;
      border:1px solid rgba(15,15,16,.14);
      background:rgba(255,255,255,.50);
      color:var(--ink);
      cursor:pointer;
      white-space:nowrap;
    }
    .btn.primary{
      background: var(--ink);
      color:#fff;
      border-color: var(--ink);
    }
    .btn:hover{opacity:.92}

    /* full-width bands */
    .band{position:relative;z-index:1;width:100%}
    .band.bgA{background:var(--bgA)}
    .band.bgB{background:var(--bgB)}
    .band.bgC{background:var(--bgC)}
    .wrap{
      max-width:var(--max);
      margin:0 auto;
      padding: 26px 18px 90px;
    }

    .section{margin-top:86px}
    .hr{margin-top:86px;border:0;border-top:1px solid rgba(15,15,16,.10)}

    /* HERO (mountains) */
    .hero{
      position:relative;
      border-radius: 34px;
      overflow:hidden;
      min-height: 520px;
      box-shadow: var(--shadow);
      border: 1px solid rgba(15,15,16,.08);
      background:
        linear-gradient(180deg, rgba(0,0,0,.20), rgba(0,0,0,.56)),
        url("hero-bg.png");
      background-size:cover;
      background-position:center;
    }
    .hero::after{
      content:"";
      position:absolute; inset:0;
      background: radial-gradient(1100px 520px at 20% 0%, rgba(255,255,255,.12), transparent 60%);
      pointer-events:none;
      opacity:.95;
    }
    .heroin{
      position:absolute; inset:0;
      padding:48px 42px;
      display:flex; align-items:center;
    }
    .hero h1{
      margin:0;
      font-size: 64px;
      line-height:1.02;
      letter-spacing:-1.0px;
      color:#fff;
      max-width: 920px;
      text-shadow: 0 22px 80px rgba(0,0,0,.45);
    }
    .hero p{
      margin:14px 0 0;
      font-size:16px;
      line-height:1.75;
      color: rgba(255,255,255,.84);
      max-width: 700px;
    }
    .hero .ctas{margin-top:18px;display:flex;gap:10px;flex-wrap:wrap}
    .hero .btn{
      background: rgba(255,255,255,.12);
      color:#fff;
      border-color: rgba(255,255,255,.22);
    }
    .hero .btn.primary{
      background: rgba(255,255,255,.92);
      color: var(--ink);
      border-color: rgba(255,255,255,.92);
    }
    @media(max-width:900px){
      .hero{min-height:460px}
      .heroin{padding:34px 20px}
      .hero h1{font-size:42px}
    }

    /* TYPO */
    .kicker{
      font-size:12px;
      letter-spacing:.16em;
      text-transform:uppercase;
      color: var(--muted2);
      margin:0 0 10px;
    }
    h2{
      margin:0;
      font-size:34px;
      letter-spacing:-.4px;
      line-height:1.15;
    }
    .lead{
      margin:12px 0 0;
      font-size:16px;
      line-height:1.8;
      color: var(--muted);
      max-width: 900px;
    }

    /* WHY: Carbono-like layout (left narrative + separated bullet blocks + right calculator) */
    .whygrid{
      margin-top:26px;
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap:28px;
      align-items:start;
    }
    @media(max-width:980px){.whygrid{grid-template-columns:1fr}}

    .featurelist{
      margin-top:18px;
      display:grid;
      gap:14px;
      max-width: 920px;
    }
    .feature{
      display:flex;
      gap:12px;
      align-items:flex-start;
      padding:14px 14px;
      border-radius:18px;
      border:1px solid rgba(15,15,16,.10);
      background: rgba(255,255,255,.70);
      box-shadow: var(--shadow2);
    }
    .dot{
      width:7px;height:7px;border-radius:999px;
      margin-top:7px;
      background: rgba(15,15,16,.55);
      flex:0 0 auto;
    }
    .feature .t{
      font-size:15px;
      line-height:1.75;
      color: var(--muted);
    }
    .feature .t b{color:var(--ink)}

    /* Calculator card */
    .calc{
      border-radius: 26px;
      background: rgba(255,255,255,.76);
      border: 1px solid rgba(15,15,16,.10);
      box-shadow: var(--shadow2);
      padding:18px;
    }
    .controls{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
      margin-bottom:16px;
    }
    @media(max-width:700px){.controls{grid-template-columns:1fr}}
    .field label{
      display:block;
      font-size:12px;
      letter-spacing:.14em;
      text-transform:uppercase;
      color: var(--muted2);
      margin:0 0 8px;
    }
    .field input{
      width:100%;
      border-radius:14px;
      border:1px solid rgba(15,15,16,.14);
      background: rgba(255,255,255,.96);
      padding:12px 12px;
      font-size:14px;
      outline:none;
    }

    /* Savings blocks BELOW inputs (as requested) */
    .savings{
      display:grid;
      grid-template-columns: repeat(3,1fr);
      gap:12px;
      margin-top:10px;
    }
    @media(max-width:980px){.savings{grid-template-columns:1fr}}
    .savebox{
      border-radius:18px;
      padding:14px 14px;
      border: 1px solid rgba(15,15,16,.10);
      background: rgba(255,255,255,.88);
    }
    .savebox .t{
      font-size:12px;
      letter-spacing:.14em;
      text-transform:uppercase;
      color: var(--muted2);
    }
    .savebox .v{
      margin-top:10px;
      font-size:18px;
      font-weight:900;
      line-height:1.25;
    }
    .savebox .v .small{
      font-weight:800;
      font-size:16px;
    }
    .savebox .s{
      margin-top:10px;
      font-size:12px;
      color: var(--muted2);
      line-height:1.6;
    }

    /* Cartoon between sections (Carbono-like: left copy, right image) */
    .between{
      margin-top:86px;
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap:26px;
      align-items:center;
    }
    @media(max-width:980px){.between{grid-template-columns:1fr}}
    .between h3{
      margin:0;
      font-size:34px;
      letter-spacing:-.4px;
      line-height:1.15;
    }
    .between p{
      margin:12px 0 0;
      color: var(--muted);
      line-height:1.85;
      font-size:16px;
      max-width: 760px;
    }
    .cartoon{
      border-radius: 28px;
      overflow:hidden;
      border: 1px solid rgba(15,15,16,.10);
      box-shadow: var(--shadow2);
      background: rgba(255,255,255,.70);
    }
    .cartoon img{
      width:100%;
      height:auto;
      display:block;
    }

    /* ABOUT */
    .about{
      margin-top:26px;
      display:grid;
      grid-template-columns: 120px 1fr;
      gap:18px;
      align-items:start;
    }
    @media(max-width:650px){.about{grid-template-columns:1fr}}
    .avatar{
      width:120px;height:120px;border-radius:999px;
      overflow:hidden;
      border:1px solid rgba(15,15,16,.10);
      box-shadow: var(--shadow2);
      background: rgba(255,255,255,.7);
    }
    .avatar img{width:100%;height:100%;object-fit:cover;display:block}

    /* CONTACT + MAP */
    .contact-grid{
      margin-top:22px;
      display:grid;
      grid-template-columns: 1fr 1.2fr;
      gap:26px;
      align-items:start;
    }
    @media(max-width:980px){.contact-grid{grid-template-columns:1fr}}

    .card{
      border-radius: 26px;
      background: rgba(255,255,255,.76);
      border: 1px solid rgba(15,15,16,.10);
      box-shadow: var(--shadow2);
      padding:18px;
    }

    form{margin-top:6px;}
    form .row{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    @media(max-width:720px){form .row{grid-template-columns:1fr}}

    .formlabel{
      display:block;
      margin:14px 0 8px;
      font-size:12px;
      letter-spacing:.14em;
      text-transform:uppercase;
      color: var(--muted2);
    }
    .forminput, textarea{
      width:100%;
      border-radius:14px;
      border:1px solid rgba(15,15,16,.14);
      background: rgba(255,255,255,.96);
      color: var(--ink);
      padding:12px 12px;
      font-size:14px;
      outline:none;
    }
    textarea{min-height:140px; resize:vertical}
    .forminput:focus, textarea:focus{border-color: rgba(15,15,16,.40)}

    .map{
      border-radius: 26px;
      overflow:hidden;
      border: 1px solid rgba(15,15,16,.10);
      box-shadow: var(--shadow2);
      background: rgba(255,255,255,.76);
    }
    .map iframe{width:100%;height:420px;border:0;display:block}
    .map-foot{
      padding:12px 14px 14px;
      border-top:1px solid rgba(15,15,16,.08);
      color: var(--muted);
      line-height:1.6;
      font-size:14px;
      background: rgba(255,255,255,.86);
    }
    .map-foot .label{
      font-size:12px;
      letter-spacing:.14em;
      text-transform:uppercase;
      color: var(--muted2);
      margin-bottom:6px;
    }

    /* REFERENCES */
    .refs{
      margin-top:18px;
      max-width: 980px;
      color: var(--muted);
      line-height:1.8;
      font-size:14px;
    }
    .refs ol{margin:0;padding-left:18px}
    .refs li{margin:10px 0}

    footer{
      margin-top:86px;
      padding-top:18px;
      border-top:1px solid rgba(15,15,16,.10);
      color: var(--muted2);
      font-size:12px;
      line-height:1.7;
      display:flex;
      justify-content:space-between;
      gap:14px;
      flex-wrap:wrap;
      align-items:center;
    }

    html{scroll-behavior:smooth}
  </style>
</head>

<body>
  <div class="noise" aria-hidden="true"></div>

  <header>
    <div class="nav">
      <a class="brand" href="#top" aria-label="Home">
        <div class="name">EMPIRICA</div>
        <div class="tag">Evidence-based investing education</div>
      </a>

      <nav>
        <a class="link" href="#why">Why</a>
        <a class="link" href="#about">About</a>
        <a class="link" href="#contact">Contact</a>
        <a class="link" href="#references">References</a>
        <a class="btn primary" href="#contact">Book now</a>
      </nav>
    </div>
  </header>

  <!-- BAND A -->
  <section class="band bgA" id="top">
    <div class="wrap">
      <div class="hero" aria-label="Hero">
        <div class="heroin">
          <div>
            <h1>Learn how to manage your wealth</h1>
            <p>
              Evidence-based investing education for people who want to understand markets, build a long-term plan,
              and avoid compounding percentage fees.
            </p>
            <div class="ctas">
              <a class="btn primary" href="#contact">Book</a>
              <a class="btn" href="#why">Why this exists</a>
              <a class="btn" href="#services">Services</a>
            </div>
          </div>
        </div>
      </div>

      <hr class="hr"/>
    </div>
  </section>

  <!-- BAND B -->
  <section class="band bgB">
    <div class="wrap">
      <section class="section" id="why">
        <p class="kicker">Why this exists</p>
        <h2>Markets are not magic — and you don’t need an expensive intermediary to participate.</h2>
        <p class="lead">
          Nobody can reliably beat the market. But we do have more than a century of data and a small set of robust ideas
          documented in public research (Fama, Shiller, Bernstein, and others).
          This service is for people who want to learn the evidence and handle their wealth with clarity.
        </p>

        <div class="whygrid">
          <div>
            <!-- Separated, visible “points” like Carbono blocks -->
            <div class="featurelist">
              <div class="feature"><div class="dot"></div><div class="t"><b>The core knowledge is public.</b> You can learn it in a focused session and apply it for decades.</div></div>
              <div class="feature"><div class="dot"></div><div class="t"><b>Long-term investing (10+ years)</b> is where compounding becomes meaningful.</div></div>
              <div class="feature"><div class="dot"></div><div class="t"><b>Bank and robo-advisor fees compound against you</b> over time. You are often paying for convenience, not superior knowledge.</div></div>
              <div class="feature"><div class="dot"></div><div class="t"><b>Trading and tipsters</b> typically underperform after costs; the evidence is strong across markets and time periods.</div></div>
              <div class="feature"><div class="dot"></div><div class="t"><b>Macroeconomics is worth learning:</b> inflation, rates, bonds vs stocks, growth, demographics, productivity, valuation.</div></div>
            </div>
          </div>

          <div class="calc" aria-label="Fee savings calculator">
            <div class="controls">
              <div class="field">
                <label>Initial amount (CHF)</label>
                <input id="inpLump" type="number" min="0" step="1000" value="100000" />
              </div>
              <div class="field">
                <label>Monthly contribution (CHF)</label>
                <input id="inpMonthly" type="number" min="0" step="100" value="2000" />
              </div>
              <div class="field">
                <label>Robo-advisor fee (%/year)</label>
                <input id="inpRobo" type="number" min="0" max="5" step="0.05" value="0.5" />
              </div>
              <div class="field">
                <label>Bank fee (%/year)</label>
                <input id="inpBank" type="number" min="0" max="5" step="0.05" value="1.5" />
              </div>
            </div>

            <!-- Numbers below the inputs -->
            <div class="savings" aria-label="Savings summary">
              <div class="savebox">
                <div class="t">At 10 years</div>
                <div class="v" id="save10">You save: <span class="small">CHF —</span></div>
                <div class="s" id="save10sub">—</div>
              </div>
              <div class="savebox">
                <div class="t">At 20 years</div>
                <div class="v" id="save20">You save: <span class="small">CHF —</span></div>
                <div class="s" id="save20sub">—</div>
              </div>
              <div class="savebox">
                <div class="t">At 30 years</div>
                <div class="v" id="save30">You save: <span class="small">CHF —</span></div>
                <div class="s" id="save30sub">—</div>
              </div>
            </div>

            <p style="margin:14px 0 0; color: var(--muted2); font-size:12px; line-height:1.7">
              Illustration using a constant 8% nominal gross return to make fee compounding intuitive (not a forecast).
            </p>
          </div>
        </div>

        <!-- Cartoon between sections (like Carbono) -->
        <div class="between" aria-label="Illustration band">
          <div>
            <p class="kicker" style="margin-bottom:10px;">Second-order effects</p>
            <h3>Small frictions compound into large outcomes.</h3>
            <p>
              Most products sell simplicity. But the <em>second-order effect</em> is what matters:
              recurring fees and behavior gaps compound over decades.
              A clear plan and a basic evidence-based toolkit can be life-changing.
            </p>
          </div>
          <div class="cartoon">
            <img src="cartoon.jpg" alt="Illustration: compounding effects" />
          </div>
        </div>
      </section>

      <hr class="hr"/>
    </div>
  </section>

  <!-- BAND C -->
  <section class="band bgC">
    <div class="wrap">
      <section class="section" id="about">
        <p class="kicker">About</p>
        <h2>Quantitative scientist at ETH Zürich.</h2>

        <div class="about">
          <div class="avatar" aria-label="Profile photo">
            <img src="Pablo.jpg" alt="Pablo" />
          </div>
          <div>
            <p class="lead" style="margin-top:0">
              I’m a quantitative scientist, currently a postdoc at ETH Zürich working in biophysics.
              I started learning economics because I wanted to understand how the world works—and I discovered a huge industry
              charging high recurring fees for knowledge that is largely not proprietary.
              This service is designed to teach you what is known, help you structure a long-term plan,
              and keep you in control.
            </p>
          </div>
        </div>
      </section>

      <hr class="hr"/>

      <section class="section" id="contact">
        <p class="kicker">Contact</p>
        <h2>Contact & location</h2>
        <p class="lead">Send a message and I’ll reply with next steps.</p>

        <div class="contact-grid">
          <div class="card">
            <form action="https://formspree.io/f/mnjqadnq" method="POST">
              <div class="row">
                <div>
                  <label class="formlabel" for="name">Name</label>
                  <input class="forminput" id="name" name="name" required />
                </div>
                <div>
                  <label class="formlabel" for="email">Email</label>
                  <input class="forminput" id="email" name="email" type="email" required />
                </div>
              </div>

              <div class="row">
                <div>
                  <label class="formlabel" for="phone">Phone</label>
                  <input class="forminput" id="phone" name="phone" type="tel" />
                </div>
                <div>
                  <label class="formlabel" for="topic">Topic</label>
                  <input class="forminput" id="topic" name="topic" />
                </div>
              </div>

              <label class="formlabel" for="message">Message</label>
              <textarea id="message" name="message" required></textarea>

              <div style="margin-top:16px; display:flex; gap:10px; align-items:center; flex-wrap:wrap">
                <button class="btn primary" type="submit">Send</button>
              </div>
            </form>
          </div>

          <div class="map" aria-label="Map of Zurich, Switzerland">
            <iframe
              loading="lazy"
              referrerpolicy="no-referrer-when-downgrade"
              src="https://www.google.com/maps?q=8046%20Zurich%20Switzerland&output=embed"
              title="Map: 8046 Zurich, Switzerland">
            </iframe>
            <div class="map-foot">
              <div class="label">Address</div>
              <div>8046 Zurich, Switzerland</div>
            </div>
          </div>
        </div>
      </section>

      <hr class="hr"/>

      <section class="section" id="references">
        <p class="kicker">References</p>
        <h2>Selected sources</h2>

        <div class="refs">
          <ol>
            <li>Fama, E. F. (1970). <em>Efficient Capital Markets: A Review of Theory and Empirical Work.</em> Journal of Finance.</li>
            <li>Fama, E. F., &amp; French, K. R. (1992). <em>The Cross-Section of Expected Stock Returns.</em> Journal of Finance.</li>
            <li>Shiller, R. J. (1981). <em>Do Stock Prices Move Too Much to Be Justified by Subsequent Changes in Dividends?</em> American Economic Review.</li>
            <li>Bernstein, W. J. (2002). <em>The Four Pillars of Investing.</em> McGraw-Hill.</li>
            <li>Barber, B. M., &amp; Odean, T. (2000). <em>Trading Is Hazardous to Your Wealth.</em> Journal of Finance.</li>
          </ol>
        </div>
      </section>

      <hr class="hr"/>

      <section class="section" id="services">
        <p class="kicker">Services</p>
        <h2>Simple, flat-fee sessions.</h2>
        <p class="lead">No asset-based fees. No custody. No complexity.</p>

        <div style="margin-top:22px; display:grid; grid-template-columns: 1fr; gap:18px; max-width: 820px;">
          <div style="padding:18px 0; border-top:1px solid rgba(15,15,16,.10);">
            <div style="display:flex; justify-content:space-between; gap:14px; flex-wrap:wrap;">
              <div style="font-weight:700;">Free consultation (15 minutes)</div>
              <div style="font-weight:800;"></div>
            </div>
            <div style="margin-top:8px; color:var(--muted); line-height:1.8;">
              Short call to understand your situation and whether the educational session is a good fit.
            </div>
          </div>

          <div style="padding:18px 0; border-top:1px solid rgba(15,15,16,.10);">
            <div style="display:flex; justify-content:space-between; gap:14px; flex-wrap:wrap;">
              <div style="font-weight:700;">Educational session (3 hours)</div>
              <div style="font-weight:800;">CHF 1,200</div>
            </div>
            <div style="margin-top:8px; color:var(--muted); line-height:1.8;">
              Markets, diversification, risk, expected returns, factor premiums, and a Swiss-oriented portfolio plan with a clear execution checklist.
            </div>
          </div>

          <div style="padding:18px 0; border-top:1px solid rgba(15,15,16,.10); border-bottom:1px solid rgba(15,15,16,.10);">
            <div style="display:flex; justify-content:space-between; gap:14px; flex-wrap:wrap;">
              <div style="font-weight:700;">Follow-up session (1 hour)</div>
              <div style="font-weight:800;">CHF 300</div>
            </div>
            <div style="margin-top:8px; color:var(--muted); line-height:1.8;">
              Review, questions, and updates as life changes—without turning your plan into a “product”.
            </div>
          </div>
        </div>

        <div style="margin-top:18px;">
          <a class="btn primary" href="#contact">Book</a>
        </div>
      </section>

      <footer>
        <div style="display:flex;flex-direction:column;gap:4px;">
          <div style="font-family:var(--serif);letter-spacing:.12em;text-transform:uppercase;">EMPIRICA</div>
          <div style="font-family:var(--serif);">Evidence-based investing education</div>
          <div style="margin-top:6px;">© <span id="year"></span></div>
        </div>
        <div>Educational service only. No promises of returns.</div>
      </footer>
    </div>
  </section>

  <script>
    document.getElementById("year").textContent = new Date().getFullYear();

    const elLump = document.getElementById("inpLump");
    const elMonthly = document.getElementById("inpMonthly");
    const elRobo = document.getElementById("inpRobo");
    const elBank = document.getElementById("inpBank");

    const save10 = document.getElementById("save10");
    const save20 = document.getElementById("save20");
    const save30 = document.getElementById("save30");
    const save10sub = document.getElementById("save10sub");
    const save20sub = document.getElementById("save20sub");
    const save30sub = document.getElementById("save30sub");

    const GROSS_NOMINAL = 0.08; // illustration only

    function clamp(v, lo, hi){ return Math.min(hi, Math.max(lo, v)); }

    function fmtCHF(x){
      if (!isFinite(x)) return "—";
      const rounded = Math.round(x);
      return "CHF " + rounded.toString().replace(/\B(?=(\d{3})+(?!\d))/g, "’");
    }

    // FV with contributions at end of month
    function fv(PV, PMT, annualNet, years){
      const r = annualNet / 12;
      const n = Math.round(years * 12);
      if (n === 0) return PV;
      if (Math.abs(r) < 1e-12) return PV + PMT * n;
      const pow = Math.pow(1 + r, n);
      return PV * pow + PMT * ((pow - 1) / r);
    }

    function calc(){
      const PV = Math.max(0, Number(elLump.value || 0));
      const PMT = Math.max(0, Number(elMonthly.value || 0));
      const roboFee = clamp(Number(elRobo.value || 0) / 100, 0, 0.20);
      const bankFee = clamp(Number(elBank.value || 0) / 100, 0, 0.20);

      const rSelf = GROSS_NOMINAL;
      const rRobo = Math.max(-0.99, GROSS_NOMINAL - roboFee);
      const rBank = Math.max(-0.99, GROSS_NOMINAL - bankFee);

      function line(year){
        const a = fv(PV, PMT, rSelf, year);
        const b = fv(PV, PMT, rRobo, year);
        const c = fv(PV, PMT, rBank, year);
        return { vsRobo: a - b, vsBank: a - c };
      }

      const y10 = line(10);
      const y20 = line(20);
      const y30 = line(30);

      function setBox(elMain, elSub, obj){
        elMain.innerHTML = "You save: <span class='small'>" + fmtCHF(obj.vsRobo) + "</span>";
        elSub.textContent = "vs robo: " + fmtCHF(obj.vsRobo) + " • vs bank: " + fmtCHF(obj.vsBank);
      }

      setBox(save10, save10sub, y10);
      setBox(save20, save20sub, y20);
      setBox(save30, save30sub, y30);
    }

    [elLump, elMonthly, elRobo, elBank].forEach(el=>{
      el.addEventListener("input", calc);
      el.addEventListener("change", calc);
    });
    calc();
  </script>
</body>
</html>
